{% extends "base.html" %}

{% block content %}
    <script language="javascript">
        function addRow(tableID)
        {
            var table = document.getElementById(tableID);
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);
            var colCount = table.rows[0].cells.length;
            for(var i=0; i<colCount; i++)
            {
                var newcell = row.insertCell(i);
                newcell.innerHTML = table.rows[1].cells[i].innerHTML;
                if(i==0){
                    newcell.children[0].setAttribute("name","skills"+rowCount)
                    }
                else if(i==1){
                    newcell.children[0].setAttribute("name","experience"+rowCount)
                    }
                else{
                    newcell.children[0].setAttribute("name","rating"+rowCount)
                    }
                console.log(newcell.children[0])
            }
        }
    </script>
    <form action="" method="post" id="form" class="container-fluid">
        <table id="dataTable" class="table table-striped table-bordered">
            <thead class="thead-light">
                <tr>
                  <th scope="col">Skills</th>
                  <th scope="col">Experience</th>
                  <th scope="col">Rating</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <select class='select' id="skills" name="skills1">
                            <option value="" selected>Any</option>
                            <option value="Java">Java</option>
                            <option value="Python">Python</option>
                            <option value="Scala">Scala</option>
                            <option value="Angular">Angular</option>
                            <option value="JS">JS</option>
                        </select>
                    </td>
                    <td>
                        <input type="text" id="experience" name="experience1" value="0">
                    </td>
                    <td>
                        <select class='select' id="rating" name="rating1">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </td>
                </tr>
            </tbody>
        </table>
        <input type="button" value="Add Row" onclick="addRow('dataTable')">
        <br><br>
    </form>
    <button type="submit" form="form" value="Submit" >Search</button>
    <div class="container-fluid">
         <table id="results" class="table table-striped table-bordered">
            <thead class="thead-light">
                <tr>
                    <th scope="col">Employee ID</th>
                    <th scope="col">Employee Name</th>
                    <th scope="col">Employee e-mail</th>
                    <th scope="col">Practice</th>
                    <th scope="col">Location</th>
                    <th scope="col">Statistics</th>
                </tr>
            </thead>
            <tbody>
            {% for i in result %}
                <tr>
                    <td>{{ i[0].emp_id }}</td>
                    <td>{{ i[0].username }}</td>
                    <td>{{ i[0].email }}</td>
                    <td>{{ i[0].practice }}</td>
                    <td>{{ i[0].location }}</td>
                    <td>{{ i[1] }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
